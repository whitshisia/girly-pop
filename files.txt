const firebaseConfig = {
  apiKey: "AIzaSyBcyL-bgv_LrIO3R7glmUDMCw06_j7iL3g",
  authDomain: "gyal-77e1f.firebaseapp.com",
  projectId: "gyal-77e1f",
  storageBucket: "gyal-77e1f.firebasestorage.app",
  messagingSenderId: "1016282200814",
  appId: "1:1016282200814:web:9591348571bb756ce151ff",
  measurementId: "G-BKY2SJPPW3"
};

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users can only access their own data
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    match /cycles/{userId}/userCycles/{cycleId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    match /dailyLogs/{userId}/logs/{logId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    match /pregnancy/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Articles are public read-only
    match /articles/{articleId} {
      allow read: if true;
      allow write: if request.auth != null; // Admin only
    }
  }
}

// Community rules
match /community/posts/{postId} {
  allow read: if true; // Anyone can read posts
  allow create: if request.auth != null;
  allow update, delete: if request.auth != null && 
    (resource.data.authorId == request.auth.uid || 
     get(/databases/$(database)/documents/users/$(request.auth.uid)).data.isAdmin == true);
}

match /community/comments/{commentId} {
  allow read: if true; // Anyone can read comments
  allow create: if request.auth != null;
  allow update, delete: if request.auth != null && 
    (resource.data.authorId == request.auth.uid || 
     get(/databases/$(database)/documents/users/$(request.auth.uid)).data.isAdmin == true);
}

match /community/categories/{categoryId} {
  allow read: if true;
  allow write: if request.auth != null && 
    get(/databases/$(database)/documents/users/$(request.auth.uid)).data.isAdmin == true;
}
